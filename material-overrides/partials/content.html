{#-
  This file was automatically generated - do not edit
-#}
{% include "partials/tags.html" %}
{% set rendered_content = page.content %}

{% if "faq" in page.url %}
  {# Split content for each FAQ item by h3 #}
  {% set h3_sections = rendered_content.split('<h3') %}
  {% set intro_content = h3_sections[0] %}

  {# Keep any introduction / normal headings (including h2) intact #}
  {% if intro_content %}
    {{ intro_content | safe }}
  {% endif %}

  {# Process each FAQ item section #}
  {% for i in range(1, h3_sections | length) %}
    {% set section = h3_sections[i] %}
    {% set section_counter = loop.index %}

    {# Extract h3 content #}
    {% set h3_end = section.find('</h3>') %}
    {% if h3_end != -1 %}
      {% set h3_full = section[:h3_end] %}
      {% set h3_content_start = h3_full.find('>') + 1 %}
      {% set h3_text = h3_full[h3_content_start:] %}
      {% set h3_attributes = h3_full[:h3_content_start-1] %}

      {# Extract ID from h3 attributes #}
      {% set id_start = h3_attributes.find('id="') %}
      {% set h3_id = '' %}
      {% if id_start != -1 %}
        {% set id_start = id_start + 4 %}
        {% set id_end = h3_attributes.find('"', id_start) %}
        {% set h3_id = h3_attributes[id_start:id_end] %}
      {% endif %}

      {# Get content after h3 until next h3 or end of page #}
      {% set h3_closing_tag_length = 5 %} {# Length of '</h3>' #}
      {% set section_content = section[h3_end + h3_closing_tag_length:] %}

      {# Generate unique details ID #}
      {% set details_id = ('faq-' ~ page.url ~ '-' ~ section_counter)
        | replace('/', '-')
        | replace('?', '')
        | replace('#', '')
        | replace('.', '-')
        | replace(' ', '-')
        | replace('--', '-') %}

      <details class="interface faq" id="{{ details_id }}">
        <summary>
          <h3{% if h3_id %} id="{{ h3_id }}"{% endif %}>{{ h3_text | safe }}</h3>
        </summary>
        {{ section_content | safe }}
      </details>
    {% endif %}
  {% endfor %}
{% else %}
  {{ rendered_content | safe }}
{% endif %}

{% include "partials/source-file.html" %}
{% include "partials/feedback.html" %}
{% include "partials/comments.html" %}